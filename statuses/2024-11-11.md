前阵子因为bash缺少命令运行时间显示能力，所以装了zsh。但我把bashrc改名为zshrc后，报了些错，不完全兼容，还得重新配一下提示符。我不想用oh-my-zsh无缘无故增加认知负担，但自己又不知道怎么写配置文件，于是配置的事情一拖再拖。经历了这段几乎裸用zsh的时间，在第不知道多少次因为Home和End键用不了而狂按左右方向键的时候，我意识到zsh是个垃圾shell，它在悄无声息地降低我的效率。

- Home、End、Delete键用不了。据ArchWiki描述，需要配置一下终端按键绑定才能用。
- zsh的默认提示符只显示主机名，不显示当前目录。
- 即使用默认提示符，在VSCode里还是有输入随机错位问题，应该是提示符宽度计算有bug。
- help是坏的，并且错误信息匪夷所思：“zsh: permission denied: help”。

这些问题在同样默认配置的bash中都不存在。我本期待着zsh能至少自动带来一些增益，但在这个所有shell的共同祖先是屎的世界里，看来是我想多了。

我多年以前用过fish，fish哲学就是人性化。但是因为它完全不兼容bash，设为默认shell会导致很多问题，语法也要重新学。但最近读到Julia Evans的[Reasons I still love the fish shell](https://jvns.ca/blog/2024/09/12/reasons-i--still--love-fish/)，我还是安装回了fish。

我发觉，可以保持默认shell不变，而让默认shell自动启动fish，这样程序读到的shell还是bash，自动化命令执行就不会有问题。这是否也是一种NTR？现在，我的默认shell是zsh，但是zshrc的内容是

```sh
exec fish
```

至于语法不同的问题，写自动化脚本当然还是用bash，而交互使用时，也不会真有人在命令行上使用高级bash特性吧？除了配置的时候不得不使用fish语法，但fish基本不用配置。真要配置，该读文档还是要读文档，其实没差。

才安装上fish没几分钟，我就已经太感动了。

- Home、End、Delete键当然能直接使用。
- Ctrl+Z是撤销！
- 执行语法错误的命令会保留输入行以供修改。
- 默认的提示符信息密度很高，甚至自带Git集成。
- 修改配置文件会实时刷新。
- fish\_config提供图形化配置页面。这就能看到，disco提示符主题带有上条命令的执行耗时，选中它就不用配了。可惜能图形化配置的设置还是有点少。
